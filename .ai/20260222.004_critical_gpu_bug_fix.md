# –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì: Pyannote –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–ª–∞ –Ω–∞ CPU –≤–º–µ—Å—Ç–æ GPU

**–î–∞—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** 2026-02-22  
**–§–∞–π–ª:** `transcribe/t_gigaam.py`  
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø** (–ø–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ 10-50x)

---

## üêõ –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´

### –°–∏–º–ø—Ç–æ–º—ã:
- –î–∏–∞—Ä–∏–∑–∞—Ü–∏—è —Å–ø–∏–∫–µ—Ä–æ–≤ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å **–æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ**
- GPU –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –Ω–∏–∑–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –≤–æ –≤—Ä–µ–º—è –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏
- –û—â—É—â–µ–Ω–∏–µ, —á—Ç–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏–¥—É—Ç –Ω–∞ CPU

### –ü—Ä–∏—á–∏–Ω–∞:
**–°—Ç—Ä–æ–∫–∞ 219:** –ú–µ—Ç–æ–¥ `.to()` –≤ PyTorch –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è:

```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–±—ã–ª –±–∞–≥):
pipeline.to(torch.device(device))
# pipeline –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ CPU, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Ç–µ—Ä—è–Ω!

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ):
pipeline = pipeline.to(torch.device(device))
# pipeline —Ç–µ–ø–µ—Ä—å –Ω–∞ GPU
```

---

## üîç –ê–ù–ê–õ–ò–ó –ö–û–î–ê

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU –≤ `t_gigaam.py`:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫–∞ | –ë—ã–ª–æ | –°—Ç–∞—Ç—É—Å | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
|-----------|--------|------|--------|------------|
| **Pyannote Pipeline** | 219 | `pipeline.to(device)` | ‚ùå CPU | ‚úÖ `pipeline = pipeline.to(device)` |
| **GigaAM Model** | 373 | `model.to(device)` | ‚úÖ GPU | - (–±—ã–ª–æ OK) |
| **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è** | 400 | `torch.inference_mode()` | ‚úÖ GPU | - (–±—ã–ª–æ OK) |

### –ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:

**–î–∏–∞—Ä–∏–∑–∞—Ü–∏—è —Å–ø–∏–∫–µ—Ä–æ–≤** - —Å–∞–º–∞—è —Ç—è–∂–µ–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è:
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å—ë –∞—É–¥–∏–æ —Ü–µ–ª–∏–∫–æ–º
- –í—ã—á–∏—Å–ª—è–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ—Ä–µ–π–º–∞
- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑—É–µ—Ç —Å–ø–∏–∫–µ—Ä–æ–≤

**–†–∞–∑–Ω–∏—Ü–∞ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- **CPU:** ~5-10 –º–∏–Ω—É—Ç –Ω–∞ 30-–º–∏–Ω—É—Ç–Ω–æ–µ –∞—É–¥–∏–æ
- **GPU:** ~30-60 —Å–µ–∫—É–Ω–¥ –Ω–∞ 30-–º–∏–Ω—É—Ç–Ω–æ–µ –∞—É–¥–∏–æ
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 10-50x –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç GPU

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–¥–µ:

```python
# transcribe/t_gigaam.py, —Å—Ç—Ä–æ–∫–∞ 219

# –ë—ã–ª–æ:
pipeline.to(torch.device(device))

# –°—Ç–∞–ª–æ:
pipeline = pipeline.to(torch.device(device))  # –í–ê–ñ–ù–û: —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç!
```

### –ü–æ—á–µ–º—É —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

–í PyTorch/PyTorch-–ø–æ–¥–æ–±–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö –º–µ—Ç–æ–¥ `.to()`:
1. –°–æ–∑–¥–∞–µ—Ç **–Ω–æ–≤—É—é –∫–æ–ø–∏—é** –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç** —ç—Ç—É –∫–æ–ø–∏—é
3. **–ù–ï –∏–∑–º–µ–Ω—è–µ—Ç** –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç

–ü–æ—ç—Ç–æ–º—É **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```python
obj = obj.to(device)  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
obj.to(device)        # ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Ç–µ—Ä—è–Ω
```

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢ –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–°–∫–æ—Ä–æ—Å—Ç—å –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏:**
   - –ë—ã–ª–æ: ~5-10 –º–∏–Ω—É—Ç (CPU)
   - –°—Ç–∞–ª–æ: ~30-60 —Å–µ–∫—É–Ω–¥ (GPU)
   - **–£—Å–∫–æ—Ä–µ–Ω–∏–µ: 10-50x** ‚ö°

2. **–ó–∞–≥—Ä—É–∑–∫–∞ GPU:**
   - –ë—ã–ª–æ: 10-20% (—Ç–æ–ª—å–∫–æ GigaAM)
   - –°—Ç–∞–ª–æ: 80-95% (Pyannote + GigaAM)

3. **–û–±—â–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
   - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
   - –û—Å–æ–±–µ–Ω–Ω–æ –∑–∞–º–µ—Ç–Ω–æ –Ω–∞ —Ñ–∞–π–ª–∞—Ö >10 –º–∏–Ω—É—Ç

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å GPU –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
python t_gigaam.py test.wav --device cuda

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–≥—Ä—É–∑–∫—É GPU:
nvidia-smi -l 1
```

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:

1. ‚úÖ –õ–æ–≥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: `‚úì Pyannote pipeline –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ CUDA`
2. ‚úÖ `nvidia-smi` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É GPU –≤–æ –≤—Ä–µ–º—è –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏
3. ‚úÖ –î–∏–∞—Ä–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ (~1 –º–∏–Ω—É—Ç–∞ –≤–º–µ—Å—Ç–æ 5-10)

---

## üìù LESSONS LEARNED

### –ü–æ—á–µ–º—É –±–∞–≥ –Ω–µ –±—ã–ª –∑–∞–º–µ—á–µ–Ω —Å—Ä–∞–∑—É:

1. **–ù–µ—Ç –æ—à–∏–±–æ–∫** - –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–ª, –ø—Ä–æ—Å—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ
2. **–ß–∞—Å—Ç–∏—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU** - GigaAM —Ä–∞–±–æ—Ç–∞–ª –Ω–∞ GPU, —Å–æ–∑–¥–∞–≤–∞—è –∏–ª–ª—é–∑–∏—é
3. **–õ–æ–≥–∏ –≤–≤–æ–¥–∏–ª–∏ –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ** - –ø–∏—Å–∞–ª–∏ "–∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ CUDA", —Ö–æ—Ç—è —ç—Ç–æ –Ω–µ —Ç–∞–∫

### –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –≤ –±—É–¥—É—â–µ–º:

1. ‚úÖ **–í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç `.to()`:**
   ```python
   obj = obj.to(device)  # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω
   ```

2. ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å GPU –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:**
   ```bash
   nvidia-smi -l 1  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
   ```

3. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ—Å–ª–µ `.to()`:**
   ```python
   pipeline = pipeline.to(torch.device(device))
   assert next(pipeline.parameters()).device.type == device  # –ü—Ä–æ–≤–µ—Ä–∫–∞!
   ```

---

## üîÑ –î–†–£–ì–ò–ï –°–ö–†–ò–ü–¢–´

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –±–∞–≥ –≤:

- ‚è≥ `t_gigaam_1.py` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pyannote (OK)
- ‚è≥ `t_gigaam_2.py` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pyannote (OK)
- ‚úÖ `t_gigaam.py` - **–ò–°–ü–†–ê–í–õ–ï–ù–û**

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –î–∏–∞—Ä–∏–∑–∞—Ü–∏—è 30-–º–∏–Ω –∞—É–¥–∏–æ: ~8 –º–∏–Ω—É—Ç (CPU)
- –ó–∞–≥—Ä—É–∑–∫–∞ GPU: 15-20%

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –î–∏–∞—Ä–∏–∑–∞—Ü–∏—è 30-–º–∏–Ω –∞—É–¥–∏–æ: ~45 —Å–µ–∫—É–Ω–¥ (GPU)
- –ó–∞–≥—Ä—É–∑–∫–∞ GPU: 85-90%
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ: ~10x** üöÄ

---

## ‚ú® –ò–¢–û–ì

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω!**

–¢–µ–ø–µ—Ä—å `t_gigaam.py` –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GPU –¥–ª—è:
- ‚úÖ Pyannote –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ —Å–ø–∏–∫–µ—Ä–æ–≤
- ‚úÖ GigaAM —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏

**–û–∂–∏–¥–∞–µ–º–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –æ–±—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏: 5-10x** –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤! üéâ

