<html>
<head>
    <title>WIFI-FREE-Taxi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
            display: flex;
            flex-direction: column;
        }

        body {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .panel {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px 30px;
            border-radius: 12px;
            max-width: 90%;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            text-align: left;
        }

        .footer-panel {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px 30px;
            border-radius: 12px;
            max-width: 90%;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            text-align: left;
        }

        .panel h1 {
            margin: 0 0 15px;
            font-size: 1.5em;
            font-weight: bold;
        }

        .panel p {
            margin: 8px 0;
            font-size: 1em;
        }

        .strong1 {
            font-weight: bold;
            font-size: 1em;
            color: #8b6508;
        }

        .strong2 {
            font-weight: bold;
            font-size: 1.2em;
            color: #b8860b;
        }

        .comment {
            font-size: 0.8em;
            color: #404040;
        }

        ul {
            list-style-type: disc; /* стандартные маркеры */
            padding-left: 10px; /* базовый отступ */
            margin: 0;
        }

        ul ul { /* вложенные списки */
            list-style-type: circle; /* чуть другой маркер */
            margin-left: 10px; /* горизонтальный отступ */
        }

        li {
            margin-left: 6px;
        }

        li li {
            margin-left: 14px;
        }

        .phone-container {
            display: flex;
            align-items: center;
            margin-top: 10px;
            width: 100%;
        }

        .phone-input {
            width: 70%;
            padding: 12px 15px;
            border: 2px solid #b8860b;
            border-radius: 8px 0 0 8px;
            font-size: 16px;
            box-sizing: border-box;
            font-family: monospace;
            height: 48px;
            transition: all 0.3s ease;
        }

        .phone-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(184, 134, 11, 0.3);
        }

        .phone-input::placeholder {
            color: #aaa;
            opacity: 1;
        }

        .submit-btn {
            width: 30%;
            padding: 0 10px;
            background-color: #b8860b;
            color: white;
            border: none;
            border-radius: 0 8px 8px 0;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            height: 48px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
        }

        .submit-btn:hover {
            background-color: #a0780a;
        }

        .submit-btn:active {
            background-color: #8b6508;
            transform: translateY(1px);
        }

        .loading {
            position: relative;
            pointer-events: none;
        }

        .loading::after {
            content: "";
            position: absolute;
            width: 16px;
            height: 16px;
            top: 50%;
            left: 50%;
            margin: -8px 0 0 -8px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .message {
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            display: none;
        }

        .success {
            background-color: rgba(46, 125, 50, 0.2);
            color: #2e7d32;
        }

        .error {
            background-color: rgba(211, 47, 47, 0.2);
            color: #d32f2f;
        }

        .call-btn {
            display: flex;
            align-items: center;
            height: auto; /* was 100% */
            padding: 0 20px; /* horizontal padding only */
            background: #28a745;
            color: #fff;
            font-family: Arial, sans-serif;
            font-size: 16px;
            text-decoration: none;
            border-radius: 6px;
            border: 2px solid #28a745;
            transition: .2s;
        }

        /* Added to size/align the SVG icon */
        .call-btn svg {
            width: 24px;
            height: 24px;
            display: block;
        }

        .call-btn:hover,
        .call-btn:focus {
            background: #218838;
            border-color: #218838;
        }

        /* Added layout styles */
        .call-layout {
            display: flex;
            align-items: stretch; /* was flex-start */
            gap: 20px;
            max-width: 600px;
        }

        .call-text {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .call-text .near {
            display: block;
            margin: 0 0 8px;
            font-size: 14px;
            line-height: 1.2;
        }

        .call-text .service_name {
            display: block;
            font-size: 2rem;
            font-weight: 700;
            line-height: 1.1;
        }

        /* Стиль для кнопки "для детей" */
        .kids-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 100%; /* на всю ширину контейнера */
            box-sizing: border-box; /* учитывать padding в ширине */
            margin-top: 10px;
            padding: 12px 15px;
            background: #3498db; /* яркий синий цвет */
            color: #fff;
            font-family: Arial, sans-serif;
            font-size: 16px;
            text-decoration: none;
            border-radius: 6px;
            border: 2px solid #3498db;
            transition: .2s;
            box-shadow: 0 3px 8px rgba(52, 152, 219, 0.4);
        }

        .kids-btn:hover,
        .kids-btn:focus {
            background: #2980b9; /* более темный вариант при наведении */
            border-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(52, 152, 219, 0.6);
        }
    </style>
</head>
<body>

<div class="panel">
    <div class="call-layout">
        <div class="call-text">
            <span class="service_name" style="white-space:nowrap;">Comfort+</span>
        </div>
        <a href="tel:+79775341900" class="call-btn" aria-label="Позвонить +7 977 534 1900"
           alt="Позвонить +7 977 534 1900">
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     aria-hidden="true" focusable="false">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.86 19.86 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.86 19.86 0 0 1 2.12 4.18 2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.12.81.37 1.6.72 2.34a2 2 0 0 1-.45 2.11L8.13 9.44a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.74.35 1.53.6 2.34.72A2 2 0 0 1 22 16.92z"/>
                </svg>
            </div>
            <div style="padding-left: 5pt">
                Позвонить
            </div>
        </a>
    </div>
    <p>Оплата наличными <span class="comment">(безналичная — только если найдем интернет)</span>
    <ul>
        <li><b>Нижний Новгород</b>
            <span class="comment">(от Московского вокзала до...)</span>
            <ul>
                <li>
                    <span class="strong1">до 10км</span> — <span class="strong2">750 р.</span>
                    <!--                    <br/>-->
                    <span class="comment">
						(ул.Ильинская,
                        ул.Рождественская,
					ул.Ванеева,
					ул.Бекетова,
					пр.Ленина,
					центр Сормова,
					Мещерское оз.,
					...)</span>
                </li>
                <li>
                    <span class="strong1">до 25км</span> — <span class="strong2">1500 р.</span>
                    <!--                    <br/>-->
                    <span class="comment">
						(Аэропорт,
					Автозавод,
					Сормово,
					Щербинки, 
					Афонино,
					...)</span>
                </li>
            </ul>
        </li>
        <li><b>г.Кстово</b> — <span class="strong2">2000 р.</span></li>
        <li><b>г.Бор</b> — <span class="strong2">2000 р.</span></li>
        <li><b>г.Дзержинск</b> — <span class="strong2">3500 р.</span></li>
    </ul>
    <p>Haval Jolion, детское кресло, бустер, багажник, кондиционер — всё включено</p>
    <a href="/www/media.html"
       target="_blank"
       class="kids-btn"
       aria-label="Развлечения"
       alt="Развлечения">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <!-- Воздушный шарик -->
            <path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7z"></path>
            <path d="M10 16v4"></path>
            <path d="M14 16v4"></path>
            <path d="M10 20h4"></path>
        </svg>
        <span style="margin-left: 8px">Развлечения для детей</span>
    </a>

</div>

<div style="flex: 1;"></div>

<div class="footer-panel">
    <p>Оставьте номер телефона для заказа</p>
    <form id="phoneForm">
        <div class="phone-container">
            <input type="tel" name="phone" class="phone-input" placeholder="+7 (___) ___-__-__" inputmode="tel"
                   maxlength="18" required>
            <button type="submit" class="submit-btn">Отправить</button>
        </div>
        <div id="message" class="message"></div>
    </form>
</div>


<script>
    document.getElementById('phoneForm').addEventListener('submit', async function (e) {
        e.preventDefault();

        const form = e.target;
        const submitBtn = form.querySelector('.submit-btn');
        const message = document.getElementById('message');
        const phoneInput = form.querySelector('input[name="phone"]');

        // Валидация номера телефона
        var phoneNumber = phoneInput.value.replace(/\D/g, '');
        if (phoneNumber.length < 11) {
            showMessage('Введите корректный номер телефона', 'error');
            return;
        }

        // Показываем индикатор загрузки
        submitBtn.classList.add('loading');
        submitBtn.disabled = true;
        message.style.display = 'none';

        phoneNumber = encodeURIComponent(
            //phoneInput.value.replace(/[\s]/g, '-')
            phoneInput.value
        );

        try {
            // Отправляем данные на сервер
            const response = await fetch(`/api/submit?token=` + getPageHash() + `&phone=${phoneNumber}`, {
                method: 'POST'
            });

            if (response.ok) {
                showMessage('Номер успешно отправлен! Мы скоро вам перезвоним.'
                    + "\n" + (await response.json()).message
                    , 'success');
                form.reset();
            } else {
                throw new Error('Ошибка сервера');
            }
        } catch (error) {
            console.error('Ошибка:', error);
            showMessage('Произошла ошибка. Пожалуйста, попробуйте позже.', 'error');
        } finally {
            submitBtn.classList.remove('loading');
            submitBtn.disabled = false;
        }
    });

    function showMessage(text, type) {
        const message = document.getElementById('message');
        message.textContent = text;
        message.className = `message ${type}`;
        message.style.display = 'block';
    }

    // Форматирование номера телефона (опционально)
    document.querySelector('.phone-input').addEventListener('input', function (e) {
        let value = this.value.replace(/\D/g, '');
        if (value.length > 0 && value[0] !== '7') {
            value = '7' + value;
        }

        let formatted = '+7 ';
        if (value.length > 1) formatted += `(${value.substring(1, 4)}`;
        if (value.length > 4) formatted += `) ${value.substring(4, 7)}`;
        if (value.length > 7) formatted += `-${value.substring(7, 9)}`;
        if (value.length > 9) formatted += `-${value.substring(9, 11)}`;

        this.value = formatted;
    });

    function getPageHash() {
        const prefix = "tAA";
        const randomString = Math.random().toString(36).substring(2, 12);
        return prefix + randomString;
    }

    // Set random background image based on time of day
    function setRandomBackgroundImage() {
        const now = new Date();
        const hours = now.getHours();

        // Determine time of day
        let timeOfDay;
        if (hours >= 20 || hours < 3) {
            timeOfDay = 'night';
        } else if (hours >= 3 && hours < 16) {
            timeOfDay = 'day';
        } else { // 16-20
            timeOfDay = 'evening';
        }

        // Generate random number between 1 and 3
        const randomNumber = Math.floor(Math.random() * 3) + 1;

        // Set background image
        const backgroundImage = `images/${timeOfDay}-${randomNumber}.jpg`;
        document.body.style.backgroundImage = `url('${backgroundImage}')`;
    }

    // Execute when page loads
    window.addEventListener('DOMContentLoaded', setRandomBackgroundImage);
</script>

</body>
</html>
